{% extends 'DWSBundle::layout.html.twig' %}

{% block body %}
    {{ parent() }}
    {% if text is defined %}
	    <div class="alert alert-success alert-dismissible" role="alert">
	  		<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	  		<strong>Sucess!</strong> {{ text }}
		</div>    	
	{% endif %}
	<div class="container">
		<div class="col-md-12">
			<div class="page-header margin-none">
				<h2 class="padding-none">Products</h2>
			</div>
			{% for category in categories %}
			<div class="container">
				<div class="col-md-11 col-md-offset-1">
					<div class="page-header margin-none">
						<h4 class="padding-none">Category {{ category.name }}</h4>
					</div>
					<div class="table-responsive">
						<table class="table table-striped table-hover">
							<thead>
								<tr>
									<th>Id</th>
		                            <th>Name</th>
		                            <th>Category</th>
		                            <th>Price</th>
		                            <th>Description</th>
								</tr>
							</thead>
							<tbody>
								{% for product in category.products %}
		                            <tr>
										<td> {{ product.id }} </td> 
			                            <td> {{ product.name }} </td> 
			                            <td> {{ product.category.name }} </td> 
			                            <td> {{ product.price }} </td> 
			                            <td> {{ product.description }} </td> 
		                                <td class="actions">			
					                        <a href="{{ path('pro_show', {'id': product.id}) }}" class="btn btn-sm btn-info">
					                            details
					                        </a>
					                       	{% if is_granted('ROLE_APP_ADMIN') %}
					                        <a href="{{ path('pro_edit', {'id': product.id}, {'product': product, 'action': null}) }}" class="btn btn-sm btn-primary">
					                            edit
					                        </a>
					                        <a href="{{ path('pro_delete', {'id': product.id}) }}" class="btn btn-sm btn-danger btn-delete">
					                            delete
					                        </a>
					                        {% endif %}
						                </td>
		                            </tr>
		                         {% endfor %}
							</tbody>
						</table>
					</div>
				</div>
				{#
				<div class="row">
					<div class="text-center"> 
							<a href="{{ path('pro_create_def') }}"><button class="btn btn-primary btn-lg">Create default</button></a>
					</div>
				</div>
				#}
			</div>
		{% endfor %}
	</div>
</div>
{% endblock %}